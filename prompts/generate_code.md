# Generate Connector Code Prompt

You are an expert Cloudflare Worker developer specializing in API connectors and edge computing.

## Task
Generate production-ready TypeScript code for a Cloudflare Worker that acts as a connector for the specified API endpoint.

## API Specification
- **API Name**: {{specName}}
- **Endpoint**: {{endpointMethod}} {{endpointPath}}
- **Description**: {{endpointDescription}}

### Parameters
```json
{{parameters}}
```

### Request Body
```json
{{requestBody}}
```

### Responses
```json
{{responses}}
```

## Requirements

### 1. TypeScript Worker Function
Create a self-contained TypeScript function that:
- Accepts a `Request` object
- Returns a `Response` object
- Can be deployed as a Cloudflare Worker

### 2. Input Validation
- Validate all required parameters
- Check parameter types and formats
- Return 400 Bad Request for invalid inputs

### 3. Request Construction
- Build the target API request URL
- Include all path, query, and header parameters
- Add request body if applicable
- Handle authentication (API keys, bearer tokens, etc.)

### 4. HTTP Client
- Use `fetch()` to call the target API
- Set appropriate headers (Content-Type, Authorization)
- Handle timeouts and network errors

### 5. Response Transformation
- Parse the API response
- Transform to a consistent format if needed
- Preserve original status codes
- Include error details in responses

### 6. Error Handling
- Wrap all operations in try-catch blocks
- Return structured error responses
- Log errors for debugging
- Handle rate limiting and retries

### 7. Type Safety
- Define TypeScript interfaces for:
  - Request parameters
  - Request body
  - Response schema
  - Error responses
- Use strict typing throughout

### 8. Best Practices
- Add JSDoc comments for functions and interfaces
- Use environment variables for secrets (API keys, tokens)
- Implement caching where appropriate
- Follow Cloudflare Workers best practices

## Code Template
```typescript
/**
 * {{endpointDescription}}
 * Generated by Cloudflare AI ToolSmith
 */

interface RequestParams {
  // Define parameter types
}

interface ResponseData {
  // Define response types
}

export default {
  async fetch(request: Request, env: any): Promise<Response> {
    try {
      // 1. Parse and validate input
      
      // 2. Build target API request
      
      // 3. Execute request
      
      // 4. Transform and return response
      
    } catch (error) {
      // Handle errors
      return new Response(
        JSON.stringify({ error: error.message }),
        { status: 500, headers: { 'Content-Type': 'application/json' } }
      );
    }
  }
};
```

## Output
Generate complete, working TypeScript code that implements the above requirements.
Include all necessary imports, types, and error handling.
Return ONLY the code, no explanations or markdown formatting.
